<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encontre seu Estado</title>
    <script
        src="https://code.jquery.com/jquery-3.7.1.js"
        integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
        crossorigin="anonymous">
    </script>
    <style>
        body{
            background: url('/images/pexels-jonathan-borba-15831910.jpg');
            background-size: cover;
            background-color: rgb(247, 255, 19);
            display: block;
            text-align: center;
            padding: 5px;
        }

        h1{
            font-family: Arial, Helvetica, sans-serif;
            color:rgb(255, 255, 255);
            
        }

        body, #campo1{
            height: 90vh;
            border-radius: 20px;
        }

        input{
            z-index: 2;
            border-radius: 5px;
            width: 200px;
            height: 30px;
            text-align: center;
            border: 3px solid blue;
            color: blue;
            background-color: white;
        }

        input:hover{
            width:220px ;
            transition: 0.5s;
        }

        button{
            cursor: pointer;
            font-weight: bold;
            color: blue;
            border-radius: 5px;
            border: 3px solid blue;
            padding: 8px;
            background-color:white ;
        }

        button:hover{
            transition: 0.5s;
            color: white;
            background-color: blue;
            border: 3px solid white;
        }

        #infos{
            margin-top: 20px;
            display: block;
            text-align: center;
        }

        #infos img{
            width: 380px;
            border: 3px solid rgba(78, 78, 233, 0.825);
            border-radius: 20px;
        }

        #infos div{
            font-weight: bold;
            display: inline-block;
            background-color: rgba(78, 78, 233, 0.825);
            padding: 10px;
            width: 360px;
            border-radius: 0px 0px 20px 20px;
            color: white;
        }



    </style>
</head>
<body>
    <div id="campo1">
        <h1>Pesquise um <br>estado brasileiro:</h1>
        <input  id="estado" type="text" placeholder="Ex: Roraima, Piauí...">
        <button autofocus  id="pesquisar">Pesquisar</button> 
        <div id="infos"></div>
    </div>
</body>

<script>

    $('#pesquisar').on('click', function(){
        //pegando o valor do input
        let valor = $('#estado').val()
        //convertendo o valor do input em letras minusculas
        var valorB = valor.toLowerCase()
        //funçao para trocar os caracteres especiais por letras normais
        function troca(vogal){
	    return vogal.replace(/[ã]/g, 'a').replace(/[í]/g, 'i').replace(/[á]/g, 'a').replace(/[ô]/g, 'o')
        }
        //chamando a função para o valor digitado e convertido no input
        valorB = troca(valorB)
        //URL + valorb que será o estado digitado pelo usuário, ja convertido pelas linhas acima
        var url = 'https://my-json-server.typicode.com/Felipecpo1/main/cursos/' + valorB
        //AJAX para abertura de conexão com o json criado
        $.ajax(url)
            .done(function(json){
                //stringfy para o json capturadp
                var string = JSON.stringify(json)
                //conversão do json capturado para objeto
                var objs = JSON.parse(string)
                //limpando o campo de infos toda vez que um nova estado for pesquisado
                $('#infos').empty()
                //removendo o que foi digitado no camp de pesquisa 
                $('#estado').val('')
                //mostrando o json capturado e convertido para html
                $('#infos').append(`<img src = '${objs.url}'/><br>`+'<div>Estado: ' + objs.estado+'<br> Capital: '+objs.capital + '<br> População: ' + objs.populacao + '</div>')
            }
            )
            .fail(function(){
                alert('Estado não encontrado')
            })
    }
    )
    $('#estado').keyup(function(event){
            if(event.keyCode === 13){
                $('#pesquisar').click();
             }
        });
    
</script>
</html>